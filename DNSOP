# Instalación y configuración de DNS en Windows Server
Write-Host "Se comienza a instalar el Servicio de DNS"
Install-WindowsFeature -Name DNS -IncludeManagementTools

Write-Host "Verificando si esta instalado correctamente"
Get-WindowsFeature -Name DNS

# Configuración de dominio
$dominio = "reprobados.com"
$ip = "192.168.1.109" 

Add-DnsServerPrimaryZone -Name "$($dominio)" -ZoneFile "$($dominio).dns" -DynamicUpdate NonsecureAndSecure
Write-Host "Se registró la Primary Zone del dominio junto con su Zone File en el servidor"

# Configuración de registros A
Add-DnsServerResourceRecordA -Name "@" -ZoneName $dominio -IPv4Address $ip
Add-DnsServerResourceRecordA -Name "www" -ZoneName $dominio -IPv4Address $ip
Write-Host "Se generaron los Record del dominio con su IP"

# Reinicio del servicio DNS
Write-Host "Reiniciando el servicio de DNS..."
Restart-Service -Name DNS
Write-Host "Servicio DNS reiniciado. Presione una tecla para salir..."
Read-Host
